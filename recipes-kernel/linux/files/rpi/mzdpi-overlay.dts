/dts-v1/;
/plugin/;

/ {
    compatible = "brcm,bcm2835", "brcm,bcm2708", "brcm,bcm2709";
    fragment@0 {
        target = <&spi0_pins>;
        __overlay__ {
            brcm,pins = <37 38 39>;
            brcm,function = <4>;     /* alt0 was <3> alt4 */
        };
    };
    fragment@1 {
        target = <&spi0_cs_pins>;
        frag1: __overlay__ {
            brcm,pins = <36>;
            brcm,function = <1>; /* output */
        };
    };
    fragment@2 {
        target = <&spidev0>;
        frag2: __overlay__ {
            status = "okay";
        };
    };
    fragment@3 {
        target = <&spidev1>;
        __overlay__ {
            status = "disabled";
        };
    };
    fragment@4 {
        target = <&spi0>;
        frag4: __overlay__ {
            /* needed to avoid dtc warning */
            #address-cells = <1>;
            #size-cells = <0>;
            cs-gpios = <&gpio 36 1>;
            status = "okay";
        };
    };
    fragment@5 {
        target = <&aux>;
        __overlay__ {
            status = "okay";
        };
    };
    __overrides__ {
        cs0_pin  = <&frag1>,"brcm,pins:0",
               <&frag4>,"cs-gpios:4";
        cs0_spidev = <&frag2>,"status";
    };
};
